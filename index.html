<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <title>Vamos fazer algo sexta?</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --bg:#fff6fb;
      --accent:#d63384;
      --card:#ffffff;
      --text:#222;
      --muted:#6b6b6b;
      --shadow: 0 8px 20px rgba(0,0,0,0.08);
      --radius:14px;
    }

    *{box-sizing:border-box}
    html,body{
      height:100%;
      margin:0;
      font-family: "Inter", Roboto, Arial, sans-serif;
      background: linear-gradient(180deg, #fff6fb 0%, #fff 100%);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .wrap{
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px;
      box-sizing:border-box;
      position:relative;
      overflow:hidden;
    }

    .card{
      background:var(--card);
      border-radius:18px;
      padding:32px;
      box-shadow:var(--shadow);
      max-width:820px;
      width:100%;
      text-align:center;
      position:relative;
      z-index:2;
    }

    h1{
      margin:0;
      font-size:28px;
      color:var(--accent);
    }

    .subtitle{
      margin-top:8px;
      color:var(--muted);
      font-size:14px;
    }

    /* CONTROLS: agora position:relative e com √°rea bem definida */
    .controls{
      margin-top:26px;
      position:relative;
      height:110px; /* espa√ßo para movimentos do "N√£o" */
      display:flex;
      align-items:center;
      justify-content:center;
      gap:12px;
    }

    button{
      padding:12px 22px;
      font-size:16px;
      border:none;
      border-radius:10px;
      cursor:pointer;
      transition:transform .12s ease, box-shadow .12s ease, left .12s ease, top .12s ease;
      user-select:none;
      outline: none;
      position:relative;
    }

    button:active{ transform:scale(.98); }

    #sim{
      background:#28a745;
      color:white;
      box-shadow: 0 6px 14px rgba(40,167,69,0.18);
      z-index:3;
    }

    /* bot√£o "N√£o" agora √© absoluto dentro de .controls (n√£o fixed) */
    #nao{
      position:absolute;
      background:#dc3545;
      color:white;
      border-radius:12px;
      padding:10px 16px;
      box-shadow: 0 6px 14px rgba(220,53,69,0.18);
      z-index:4;
      touch-action: manipulation;
      cursor: pointer;
      /* inicio sem left/top: ser√° posicionado via JS relativo ao .controls */
    }

    /* Op√ß√µes (aparece ap√≥s clicar em Sim) */
    .opcoes{
      margin-top:20px;
      display:none;
      gap:18px;
      justify-content:center;
      align-items:flex-start;
      flex-wrap:wrap;
      z-index:2;
      position:relative;
    }

    .opcao{
      width:170px;
      background:linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.95));
      border-radius:14px;
      padding:18px 12px;
      box-shadow:var(--shadow);
      display:flex;
      flex-direction:column;
      align-items:center;
      cursor:pointer;
      transition:transform .18s ease, box-shadow .18s ease;
    }

    .opcao:hover{ transform:translateY(-6px); box-shadow: 0 14px 30px rgba(0,0,0,0.08); }

    .icone{
      width:84px;
      height:84px;
      border-radius:50%;
      display:flex;
      align-items:center;
      justify-content:center;
      margin-bottom:12px;
      background:linear-gradient(135deg, rgba(214,51,132,0.08), rgba(40,167,69,0.04));
      box-shadow: 0 8px 18px rgba(0,0,0,0.06) inset;
    }

    .opcao-name{
      font-weight:600;
      color:var(--text);
      font-size:15px;
      text-align:center;
    }

    #mensagem{
      margin-top:18px;
      font-size:16px;
      color:var(--accent);
      font-weight:700;
      display:none;
      z-index:2;
      position:relative;
    }

    /* overlay e foto que cresce */
    .overlay{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,0.48);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:50;
      opacity:0;
      pointer-events:none;
      transition:opacity .25s ease;
    }

    .overlay.show{
      opacity:1;
      pointer-events:auto;
    }

    /* anima√ß√£o via keyframes (mais confi√°vel que apenas transition) */
    @keyframes pop {
      0%   { transform: scale(0); }
      60%  { transform: scale(1.12); }
      100% { transform: scale(1); }
    }

    .photo-wrap{
      width:40vmin;
      height:40vmin;
      max-width:360px;
      max-height:360px;
      min-width:140px;
      min-height:140px;
      border-radius:50%;
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      background:linear-gradient(135deg,#fff,#f8f0ff);
      box-shadow: 0 30px 80px rgba(0,0,0,0.35);
      transform-origin: center center;
    }

    .photo-wrap.grow{
      animation: pop .72s cubic-bezier(.16,.9,.32,1) forwards;
    }

    .photo-wrap img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }

    .overlay-message{
      margin-top:18px;
      color:#fff;
      font-size:18px;
      font-weight:700;
      text-align:center;
      opacity:0;
      transform: translateY(8px);
      transition: all .32s ease;
      z-index:51;
    }

    .overlay.show .overlay-message{
      opacity:1;
      transform: translateY(0);
    }

    /* layout responsivo */
    @media (max-width:640px){
      .opcao{ width:140px; }
      .icone{ width:72px; height:72px; }
      .controls{ height:140px; gap:8px; padding:8px; }
      button{ padding:10px 14px; font-size:15px; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="main" aria-labelledby="pergunta">
      <h1 id="pergunta">Vamos fazer algo sexta?</h1>
      <div class="subtitle">Escolha uma op√ß√£o ‚Äî ou tente clicar em "N√£o" se for corajoso(a) üòâ</div>

      <div class="controls" id="controls">
        <button id="sim" aria-label="Sim, quero">Sim</button>
        <!-- "N√£o" agora vai ser posicionado dentro do .controls -->
        <button id="nao" aria-label="N√£o, n√£o quero">N√£o</button>
      </div>

      <div class="opcoes" id="opcoes" aria-hidden="true">
        <div class="opcao" data-opcao="pizzaria" tabindex="0" role="button" aria-pressed="false">
          <div class="icone" aria-hidden="true">
            <!-- SVG Pizza -->
            <svg width="58" height="58" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M12 2C6.477 2 2 6.477 2 12c0 1.78.4 3.47 1.12 5.02L12 22l8.88-4.98A9.958 9.958 0 0 0 22 12c0-5.523-4.477-10-10-10z" fill="#FFD27F"/>
              <path d="M12 4c-4.418 0-8 3.582-8 8 0 1.23.24 2.405.68 3.49L12 20V4z" fill="#FFB74D"/>
              <circle cx="9.5" cy="10.5" r="1.1" fill="#D84315"/>
              <circle cx="14.5" cy="12.2" r="1.1" fill="#D84315"/>
              <circle cx="12" cy="8.2" r="1.1" fill="#D84315"/>
            </svg>
          </div>
          <div class="opcao-name">Pizzaria</div>
        </div>

        <div class="opcao" data-opcao="churrasco" tabindex="0" role="button" aria-pressed="false">
          <div class="icone" aria-hidden="true">
            <!-- SVG Churrasco / grelha -->
            <svg width="58" height="58" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <rect x="3" y="6" width="18" height="2" rx="1" fill="#F6C27A"/>
              <path d="M6 8v6a4 4 0 0 0 8 0V8" fill="#F2944C"/>
              <path d="M16 6v2" stroke="#9E3B2D" stroke-width="1.2" stroke-linecap="round"/>
              <circle cx="8.5" cy="12" r="0.9" fill="#6B2A1F"/>
              <circle cx="12.5" cy="12.5" r="0.9" fill="#6B2A1F"/>
            </svg>
          </div>
          <div class="opcao-name">Churrasco</div>
        </div>

        <div class="opcao" data-opcao="ficar" tabindex="0" role="button" aria-pressed="false">
          <div class="icone" aria-hidden="true">
            <!-- SVG Casa -->
            <svg width="58" height="58" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M3 11.5L12 4l9 7.5V20a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1V11.5z" fill="#C7E7FF"/>
              <rect x="9" y="13" width="6" height="5" rx="0.6" fill="#77B6FF"/>
            </svg>
          </div>
          <div class="opcao-name">Ficar em casa</div>
        </div>
      </div>

      <div id="mensagem" role="status" aria-live="polite"></div>
    </div>
  </div>

  <!-- overlay + photo -->
  <div class="overlay" id="overlay" aria-hidden="true">
    <div style="text-align:center">
      <div class="photo-wrap" id="photoWrap" role="img" aria-label="Foto">
        <!-- sua foto (raw github link) -->
        <img id="playerPhoto" src="https://raw.githubusercontent.com/FlutterVictor/Brincadeira/main/WhatsApp%20Image%202025-12-04%20at%2011.16.28.jpeg" alt="Foto" />
      </div>
      <div class="overlay-message" id="overlayMessage">Opa, te mando local e hora, te vejo l√°</div>
    </div>
  </div>

  <script>
    (function(){
      const botaoNao = document.getElementById('nao');
      const botaoSim = document.getElementById('sim');
      const controls = document.getElementById('controls');
      const opcoesWrap = document.getElementById('opcoes');
      const mensagem = document.getElementById('mensagem');
      const overlay = document.getElementById('overlay');
      const photoWrap = document.getElementById('photoWrap');
      const overlayMessage = document.getElementById('overlayMessage');

      const rawPhotoUrl = document.getElementById('playerPhoto').src;

      // Posiciona o bot√£o "N√£o" inicialmente ao lado direito do bot√£o "Sim"
      function posicionarInicialNao(){
        // obter posi√ß√µes relativas dentro do container
        const simRect = botaoSim.getBoundingClientRect();
        const controlsRect = controls.getBoundingClientRect();

        // calcular coordenadas relativas ao controls (left/top)
        // colocamos o "N√£o" 12px √† direita do "Sim", alinhado verticalmente
        const left = (simRect.right - controlsRect.left) + 12;
        const top  = (simRect.top - controlsRect.top);

        botaoNao.style.left = Math.max(8, left) + 'px';
        botaoNao.style.top  = Math.max(8, top) + 'px';
      }

      // Gera uma posi√ß√£o aleat√≥ria DENTRO da √°rea de controls para o "N√£o"
      // garantindo que ele permane√ßa vis√≠vel e preferencialmente longe do centro
      function moverNaoDentroControls(){
        const padding = 8;
        const controlsRect = controls.getBoundingClientRect();
        const bw = botaoNao.offsetWidth;
        const bh = botaoNao.offsetHeight;

        // area dispon√≠vel dentro do controls (relativa ao controls)
        const maxLeft = Math.max(controls.clientWidth - bw - padding, padding);
        const maxTop  = Math.max(controls.clientHeight - bh - padding, padding);

        // tenta gerar uma posi√ß√£o que n√£o fique muito pr√≥xima do Sim
        const simRect = botaoSim.getBoundingClientRect();
        const simCenter = {
          x: (simRect.left + simRect.right)/2 - controlsRect.left,
          y: (simRect.top + simRect.bottom)/2 - controlsRect.top
        };

        let attempt = 0;
        let novaLeft, novaTop;
        do {
          novaLeft = Math.floor(Math.random() * maxLeft);
          novaTop  = Math.floor(Math.random() * maxTop);
          attempt++;
          // calcula dist√¢ncia do centro do Sim
          const dx = (novaLeft + bw/2) - simCenter.x;
          const dy = (novaTop + bh/2) - simCenter.y;
          const dist = Math.sqrt(dx*dx + dy*dy);
          // preferir dist√¢ncias maiores que 80px (evita sobreposi√ß√£o imediata)
          if(dist > 80 || attempt > 8) break;
        } while(attempt < 12);

        botaoNao.style.left = novaLeft + 'px';
        botaoNao.style.top  = novaTop + 'px';
      }

      // Ao redimensionar, garante que o "N√£o" fique dentro dos limites do controls
      function manterNaoDentroControls(){
        const bw = botaoNao.offsetWidth, bh = botaoNao.offsetHeight;
        const left = parseFloat(botaoNao.style.left || 0);
        const top = parseFloat(botaoNao.style.top || 0);
        const maxLeft = Math.max(controls.clientWidth - bw - 8, 8);
        const maxTop  = Math.max(controls.clientHeight - bh - 8, 8);
        let changed = false;
        let newLeft = left, newTop = top;
        if(left > maxLeft){ newLeft = maxLeft; changed = true; }
        if(left < 8){ newLeft = 8; changed = true; }
        if(top > maxTop){ newTop = maxTop; changed = true; }
        if(top < 8){ newTop = 8; changed = true; }
        if(changed){
          botaoNao.style.left = newLeft + 'px';
          botaoNao.style.top  = newTop + 'px';
        }
      }

      // Eventos que fazem o "N√£o" escapar
      botaoNao.addEventListener('mouseenter', (e) => {
        // pequeno delay para tornar mais divertido (evita salto instant√¢neo se o mouse estiver muito r√°pido)
        setTimeout(moverNaoDentroControls, 80);
      });

      botaoNao.addEventListener('mouseover', (e) => {
        // tamb√©m responder ao mouseover
        setTimeout(moverNaoDentroControls, 80);
      });

      // clique tenta, mas evita que fique clic√°vel
      botaoNao.addEventListener('click', (e) => {
        e.preventDefault();
        moverNaoDentroControls();
      });

      // touch (mobile): quando tocar, ele foge ‚Äî usamos touchstart e prevenimos click
      botaoNao.addEventListener('touchstart', (e) => {
        e.preventDefault();
        moverNaoDentroControls();
      }, {passive:false});

      // Mostrar op√ß√µes quando clicar em Sim (mantendo o "N√£o" por perto)
      botaoSim.addEventListener('click', () => {
        opcoesWrap.style.display = 'flex';
        opcoesWrap.setAttribute('aria-hidden','false');
        // opcional: esconder o Sim se preferir
        botaoSim.style.display = 'none';
        // reposicionar "N√£o" para garantir visibilidade dentro do controls
        // (o controls pode mudar de tamanho no mobile)
        setTimeout(() => {
          manterNaoDentroControls();
        }, 50);
      });

      // comportamento das op√ß√µes: ao clicar, animar a foto crescendo e exibir mensagem
      function acaoOpcao(tipo){
        // esconder op√ß√µes (mas manter o "N√£o" no controls ‚Äî se quiser esconder, altere aqui)
        opcoesWrap.style.display = 'none';
        // esconder tamb√©m o "N√£o" durante a anima√ß√£o para n√£o distrair (volta depois)
        botaoNao.style.visibility = 'hidden';

        // preparar overlay
        overlay.classList.add('show');
        overlay.setAttribute('aria-hidden','false');

        // recarrega imagem (garante que o navegador a tenha)
        const img = document.getElementById('playerPhoto');
        if (img.src !== rawPhotoUrl) img.src = rawPhotoUrl;

        // reset estado
        photoWrap.classList.remove('grow');
        overlayMessage.style.opacity = 0;

        // for√ßa reflow antes de aplicar a classe (garante que a anima√ß√£o rode sempre)
        void photoWrap.offsetWidth;

        // anima crescimento via keyframes
        setTimeout(()=> {
          photoWrap.classList.add('grow');
        }, 40);

        // ap√≥s a anima√ß√£o (aprox .72s), exibe a mensagem overlay
        setTimeout(()=> {
          overlayMessage.textContent = 'Opa, te mando local e hora, te vejo l√°';
          overlayMessage.style.opacity = 1;
        }, 760);

        // tamb√©m atualiza o #mensagem dentro do card (opcional)
        setTimeout(()=> {
          mensagem.textContent = 'Opa, te mando local e hora, te vejo l√°';
          mensagem.style.display = 'block';
        }, 1000);

        // fecha overlay automaticamente ap√≥s 3.2s e traz o "N√£o" de volta
        setTimeout(()=> {
          overlay.classList.remove('show');
          overlay.setAttribute('aria-hidden','true');
          photoWrap.classList.remove('grow');
          // traz o "N√£o" de volta vis√≠vel e reposicionado pr√≥ximo ao Sim (mesma posi√ß√£o inicial)
          botaoNao.style.visibility = 'visible';
          posicionarInicialNao();
        }, 3200);
      }

      // associa eventos √†s op√ß√µes
      document.querySelectorAll('.opcao').forEach(op => {
        op.addEventListener('click', () => {
          acaoOpcao(op.dataset.opcao);
        });
        op.addEventListener('keyup', (ev) => {
          if(ev.key === 'Enter' || ev.key === ' '){
            acaoOpcao(op.dataset.opcao);
          }
        });
      });

      // quando redimensiona, manter o "N√£o" dentro do controls
      window.addEventListener('resize', manterNaoDentroControls);

      // inicializa√ß√£o no load: posiciona N√ÉO ao lado do SIM
      window.addEventListener('load', () => {
        setTimeout(() => {
          posicionarInicialNao();
        }, 30);
      });

      // caso o usu√°rio clique fora do overlay, fecha
      overlay.addEventListener('click', (e) => {
        if(e.target === overlay){
          overlay.classList.remove('show');
          overlay.setAttribute('aria-hidden','true');
          photoWrap.classList.remove('grow');
          botaoNao.style.visibility = 'visible';
          posicionarInicialNao();
        }
      });

      // acessibilidade: permitir mover o "N√£o" via teclado quando focado (setas)
      botaoNao.addEventListener('keydown', (e) => {
        const step = 18;
        const left = parseFloat(botaoNao.style.left || 0);
        const top = parseFloat(botaoNao.style.top || 0);
        if(e.key === 'ArrowLeft'){ botaoNao.style.left = Math.max(8, left - step) + 'px'; }
        if(e.key === 'ArrowRight'){ botaoNao.style.left = Math.min(controls.clientWidth - botaoNao.offsetWidth - 8, left + step) + 'px'; }
        if(e.key === 'ArrowUp'){ botaoNao.style.top = Math.max(8, top - step) + 'px'; }
        if(e.key === 'ArrowDown'){ botaoNao.style.top = Math.min(controls.clientHeight - botaoNao.offsetHeight - 8, top + step) + 'px'; }
      });

    })();
  </script>
</body>
</html>
